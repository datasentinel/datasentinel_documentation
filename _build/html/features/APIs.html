<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    
    <title>API &#8212; Datasentinel</title>

    <link rel="stylesheet" href="../_static/material-icons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/datasentinel.css" />
    <link rel="stylesheet" href="../_static/notosanscjkjp.css" type="text/css" />
    <link rel="stylesheet" href="../_static/roboto.css" type="text/css" />
    <link rel="stylesheet" href="../_static/material-design-lite-1.3.0/material.indigo-pink.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx_materialdesign_theme.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/sphinx_materialdesign_theme.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Agentless" href="agentless.html" />
    <link rel="prev" title="User management" href="user-management.html" /> 
  </head>
<body>
    <div class="mdl-layout mdl-js-layout  mdl-layout--fixed-drawer"><header class="mdl-layout__header mdl-layout__header--waterfall ">
    <div class="mdl-layout__header-row">
        
        <nav class="mdl-navigation breadcrumb">
            <a class="mdl-navigation__link" href="index.html">Features</a><i class="material-icons">navigate_next</i>
            <a class="mdl-navigation__link is-active">API</a>
        </nav>
        <div class="mdl-layout-spacer"></div>
        <nav class="mdl-navigation">
        
<form class="form-inline pull-sm-right" action="../search.html" method="get">
      <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">
        <label id="quick-search-icon" class="mdl-button mdl-js-button mdl-button--icon"  for="waterfall-exp">
            <i class="material-icons">search</i>
        </label>
        <div class="mdl-textfield__expandable-holder">
          <input class="mdl-textfield__input" type="text" name="q"  id="waterfall-exp" placeholder="Search" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </div>
      </div>
      <div class="mdl-tooltip" data-mdl-for="quick-search-icon">
      Quick search
      </div>
</form>
        
<a id="button-show-source"
    class="mdl-button mdl-js-button mdl-button--icon"
    href="../_sources/features/APIs.rst.txt" rel="nofollow">
<i class="material-icons">code</i>
</a>
<div class="mdl-tooltip" data-mdl-for="button-show-source">
Show Source
</div>
        </nav>
    </div>
    <div class="mdl-layout__header-row header-links">
      <div class="mdl-layout-spacer"></div>
      <nav class="mdl-navigation">
          <a  class="mdl-navigation__link" href="../index.html">
                  <i class="material-icons navigation-link-icon">home</i>
                  Home
              </a>
          
              <a  class="mdl-navigation__link" href="https://app.datasentinel.io">
                  <i class="material-icons navigation-link-icon">dashboard</i>
                  Cloud app
              </a>
          
              <a  class="mdl-navigation__link" href="https://www.datasentinel.io">
                  <i class="material-icons navigation-link-icon">link</i>
                  Web
              </a>
          
              <a  class="mdl-navigation__link" href="https://github.com/datasentinel">
                  <i class="material-icons navigation-link-icon">link</i>
                  Github
              </a>
      </nav>
    </div>
</header><header class="mdl-layout__drawer">
    
          <!-- Title -->
      <span class="mdl-layout-title">
          <a class="title" href="../index.html">
              <img class="logo" src="../_static/datasentinel_logo_with_text.png" alt="Datasentinel"/>
          </a>
      </span>
    
    
      <div class="globaltoc">
        <span class="mdl-layout-title toc">Table Of Contents</span>
        
        
            
            <nav class="mdl-navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/platform/installation.html">On-premises platform installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/platform/agentbasedOrAgentless.html">Agent-based or Agentless?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/agent/installation.html">Agent installation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extensions/index.html">Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extensions/pg-stat-statements.html">pg_stat_statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution-plans.html">Execution plans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/system-stats.html">System stats</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">datasentinel extension</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../agent/index.html">Agent</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../agent/CLI.html">CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agent/API.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agent/faq_agent.html">Agent FAQ</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Features</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sessions-workload.html">Sessions workload</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-management.html">User management</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution-plans.html">Execution plans</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="agentless.html">Agentless</a></li>
<li class="toctree-l2"><a class="reference internal" href="connection-api.html">Connection API</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../marketplaces/index.html">Cloud marketplaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../marketplaces/aws-howto.html">Launch Datasentinel on AWS with MarketPlace metering service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../marketplaces/aws-faq.html">AWS marketplace FAQ</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../token.html">Token</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Technical support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release notes</a></li>
</ul>

            </nav>
        
        </div>
    
</header>
        <main class="mdl-layout__content" tabIndex="0">
<header class="mdl-layout__drawer">
    
          <!-- Title -->
      <span class="mdl-layout-title">
          <a class="title" href="../index.html">
              <img class="logo" src="../_static/datasentinel_logo_with_text.png" alt="Datasentinel"/>
          </a>
      </span>
    
    
      <div class="globaltoc">
        <span class="mdl-layout-title toc">Table Of Contents</span>
        
        
            
            <nav class="mdl-navigation">
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/platform/installation.html">On-premises platform installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/platform/agentbasedOrAgentless.html">Agent-based or Agentless?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/agent/installation.html">Agent installation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extensions/index.html">Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extensions/pg-stat-statements.html">pg_stat_statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution-plans.html">Execution plans</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extensions/system-stats.html">System stats</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html">datasentinel extension</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../agent/index.html">Agent</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../agent/CLI.html">CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agent/API.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agent/faq_agent.html">Agent FAQ</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Features</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sessions-workload.html">Sessions workload</a></li>
<li class="toctree-l2"><a class="reference internal" href="user-management.html">User management</a></li>
<li class="toctree-l2"><a class="reference internal" href="execution-plans.html">Execution plans</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="agentless.html">Agentless</a></li>
<li class="toctree-l2"><a class="reference internal" href="connection-api.html">Connection API</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../marketplaces/index.html">Cloud marketplaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../marketplaces/aws-howto.html">Launch Datasentinel on AWS with MarketPlace metering service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../marketplaces/aws-faq.html">AWS marketplace FAQ</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../token.html">Token</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Technical support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release notes</a></li>
</ul>

            </nav>
        
        </div>
    
</header>

    <div class="document">
        <div class="page-content">
        
  <div class="section" id="api">
<span id="id1"></span><h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="endpoints">
<h2><strong>Endpoints</strong><a class="headerlink" href="#endpoints" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>API can be reached at <strong>https://&lt;&lt;datasentinel_platform_server&gt;&gt;</strong></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="line-block">
<div class="line">If you use the SaaS architecture, the server is <strong>app.datasentinel.io</strong></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="line-block">
<div class="line">A toolkit, wich provides examples of use, is available on <a class="reference external" href="https://github.com/datasentinel/datasentinel_toolkit">Github</a></div>
<div class="line"><br /></div>
<div class="line">The toolkit is installed by default on the <strong>on-premises</strong> platform (/datasentinel/soft/datasentinel_toolkit)</div>
</div>
</div>
</div>
<div class="section" id="user-token-generation">
<h2><strong>User token generation</strong><a class="headerlink" href="#user-token-generation" title="Permalink to this headline">¶</a></h2>
<p>In order to use datasentinel API, you need to generate an access token.
<strong>The access token is valid for 1 day</strong></p>
<h6><span style="margin-left:30px;font-weight:bold; color: #45d6b5">POST</span>&nbsp;/ds-api/user-token/{organization}</h6><ul>
<li><p>Path parameter:</p>
<blockquote>
<div><div class="line-block">
<div class="line">The organization you belong to, only necessary if you use the SAAS architecture</div>
<div class="line"><strong>If you have an on-premises installation, do not set the parameter</strong></div>
</div>
</div></blockquote>
</li>
<li><p>Authentication</p>
<blockquote>
<div><div class="line-block">
<div class="line">You need to be authenticated with your username and password</div>
</div>
</div></blockquote>
</li>
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -u myUser:myPassword -k -X POST https://app.datasentinel.io/ds-api/user-token/myOrganization
</pre></div>
</div>
<ul class="simple">
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;user-token&quot;</span>: <span class="s2">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1ODAyMTYyMjQsImlhdCI6MTU4MDEyOTgxOSwiZGF0YWJhc2UiOiJNYWluIE9yZy4iLCJlbWFpbCI6InRlc3RAZGF0YXNlbnRpbmVsLmlvIiwidXNlciI6InRlc3QifQ.JMDvq2JPcqz9M0_it_0UtP9y79dClVwx9pDEzCl9HTk&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="display-user-token">
<h2><strong>Display User token</strong><a class="headerlink" href="#display-user-token" title="Permalink to this headline">¶</a></h2>
<h6><span style="margin-left:30px;font-weight:bold; color: #3f6ed8"">GET</span>&nbsp;/ds-api/user-token?token={user-token}</h6><ul>
<li><p>Path parameter:</p>
<blockquote>
<div><div class="line-block">
<div class="line">The token</div>
</div>
</div></blockquote>
</li>
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -u myUser:myPassword -k -X GET https://app.datasentinel.io/ds-api/user</span>-token?token<span class="o">=</span><span class="nv">$TOKEN</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
    <span class="s2">&quot;email&quot;</span>: <span class="s2">&quot;contact@datasentinel.io&quot;</span>,
    <span class="s2">&quot;expire_time&quot;</span>: <span class="s2">&quot;2020-04-28 13:58:53&quot;</span>,
    <span class="s2">&quot;organization_name&quot;</span>: <span class="s2">&quot;ds-data&quot;</span>,
    <span class="s2">&quot;user&quot;</span>: <span class="s2">&quot;datasentinel&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="workload-report">
<h2><strong>Workload report</strong><a class="headerlink" href="#workload-report" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="line-block">
<div class="line">Export your entire workload as a PDF file</div>
<div class="line">Here is an example <a class="reference download internal" download="" href="../_downloads/f76b07a85af547ff33ad6b7a03d307f8/workload_example.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a></div>
</div>
</div>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #ff8c69">PUT</span><span style="color:#ff8c69">&nbsp;/ds-api/activity/workload-report</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request PUT &#39;https://app.datasentinel.io/ds-api/activity/workload-report&#39; -d @body.json -o myReport.pdf</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
    <span class="s2">&quot;utc_time&quot;</span>: true,
    <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-02-28 00:00:00&quot;</span>,
    <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-02-29 01:00:00&quot;</span>,
    <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
            <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-crm-0926@:9342&quot;</span>
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">&quot;sections&quot;</span>: <span class="o">[</span>
        <span class="s2">&quot;pg_instance&quot;</span>,
        <span class="s2">&quot;top_queries&quot;</span>,
        <span class="s2">&quot;top_segments&quot;</span>,
        <span class="s2">&quot;data_size&quot;</span>,
        <span class="s2">&quot;sessions_workload&quot;</span>,
        <span class="s2">&quot;parameters&quot;</span>
    <span class="o">]</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“sections” is an array of the type of activity desired.</div>
<div class="line"><br /></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="line-block">
<div class="line">If not specified, all sections are exported</div>
<div class="line">for a <strong>developer profile</strong>, only top_queries, top_segments, and sessions_workload are available</div>
</div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>available section</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pg_instance</p></td>
<td><p>global workload  (databases activity, server)</p></td>
</tr>
<tr class="row-odd"><td><p>top_queries</p></td>
<td><p>top consumer queries (by execution time, blocks read, blocks hit)</p></td>
</tr>
<tr class="row-even"><td><p>top_segments</p></td>
<td><p>top tables, indexes…  (by blocks read, by blocks hit)</p></td>
</tr>
<tr class="row-odd"><td><p>sessions_workload</p></td>
<td><p>sessions workload group by event type, by event, by database, by user, by query</p></td>
</tr>
<tr class="row-even"><td><p>data_size</p></td>
<td><p>databases, tables and indexes size</p></td>
</tr>
<tr class="row-odd"><td><p>parameters</p></td>
<td><p>configuration parameters group by category</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sessions-workload">
<h2><strong>Sessions workload</strong><a class="headerlink" href="#sessions-workload" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/sessions-workload</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/sessions-workload&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-29 08:00:00 &quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
      <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“output”:  the output can be csv or json (default: json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:13&quot;</span>,
    <span class="s2">&quot;queryid&quot;</span>: <span class="s2">&quot;1530125615&quot;</span>,
    <span class="s2">&quot;application&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;application_name&quot;</span>: <span class="s2">&quot;N/A&quot;</span>,
    <span class="s2">&quot;client_host_name&quot;</span>: <span class="s2">&quot;127.0.0.1/32&quot;</span>,
    <span class="s2">&quot;command_type&quot;</span>: <span class="s2">&quot;SELECT&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;postgres&quot;</span>,
    <span class="s2">&quot;datacenter&quot;</span>: <span class="s2">&quot;paris&quot;</span>,
    <span class="s2">&quot;environment&quot;</span>: <span class="s2">&quot;production&quot;</span>,
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
    <span class="s2">&quot;pg_version&quot;</span>: <span class="s2">&quot;10.11&quot;</span>,
    <span class="s2">&quot;process_id&quot;</span>: <span class="s2">&quot;24943 - :9342&quot;</span>,
    <span class="s2">&quot;provider&quot;</span>: <span class="s2">&quot;amazon&quot;</span>,
    <span class="s2">&quot;query_md5_id&quot;</span>: <span class="s2">&quot;0873c77e877bd3d284317e9537bbff9e&quot;</span>,
    <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-sales-0223&quot;</span>,
    <span class="s2">&quot;user_name&quot;</span>: <span class="s2">&quot;datasentinel&quot;</span>,
    <span class="s2">&quot;wait_event&quot;</span>: <span class="s2">&quot;CPU&quot;</span>,
    <span class="s2">&quot;wait_event_type&quot;</span>: <span class="s2">&quot;CPU&quot;</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:48&quot;</span>,
    <span class="s2">&quot;queryid&quot;</span>: <span class="s2">&quot;1338018050&quot;</span>,
    <span class="s2">&quot;application&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;application_name&quot;</span>: <span class="s2">&quot;N/A&quot;</span>,
    <span class="s2">&quot;client_host_name&quot;</span>: <span class="s2">&quot;127.0.0.1/32&quot;</span>,
    <span class="s2">&quot;command_type&quot;</span>: <span class="s2">&quot;SELECT&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;postgres&quot;</span>,
    <span class="s2">&quot;datacenter&quot;</span>: <span class="s2">&quot;paris&quot;</span>,
    <span class="s2">&quot;environment&quot;</span>: <span class="s2">&quot;production&quot;</span>,
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
    <span class="s2">&quot;pg_version&quot;</span>: <span class="s2">&quot;10.11&quot;</span>,
    <span class="s2">&quot;process_id&quot;</span>: <span class="s2">&quot;24979 - :9342&quot;</span>,
    <span class="s2">&quot;provider&quot;</span>: <span class="s2">&quot;amazon&quot;</span>,
    <span class="s2">&quot;query_md5_id&quot;</span>: <span class="s2">&quot;de248cd86cdd098e9bc09964ff42391f&quot;</span>,
    <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-sales-0223&quot;</span>,
    <span class="s2">&quot;user_name&quot;</span>: <span class="s2">&quot;datasentinel&quot;</span>,
    <span class="s2">&quot;wait_event&quot;</span>: <span class="s2">&quot;CPU&quot;</span>,
    <span class="s2">&quot;wait_event_type&quot;</span>: <span class="s2">&quot;CPU&quot;</span>
  <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="top-queries">
<h2><strong>Top queries</strong><a class="headerlink" href="#top-queries" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/top-queries</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/acitity/top_queries&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-20&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-21&quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
      <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">&quot;by&quot;</span>: <span class="s2">&quot;total_time&quot;</span>,
  <span class="s2">&quot;limit&quot;</span>: <span class="m">10</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">The 2 following parameters allow to define the sorting column as well as the number of rows returned</div>
<div class="line"><br /></div>
<div class="line">“by”: sorting column. (default total_time)</div>
<div class="line">Possible values:</div>
<div class="line">- calls, local_blks_dirtied, local_blks_hit, local_blks_read, local_blks_written, rows, shared_blks_dirtied,</div>
<div class="line">- shared_blks_hit, shared_blks_read, shared_blks_written,</div>
<div class="line">- temp_blks_read, temp_blks_written, total_time, blk_read_time, blk_write_time</div>
<div class="line"><br /></div>
<div class="line">“limit”: The number of rows returned (default 20)</div>
<div class="line"><br /></div>
<div class="line">“output”:  the output can be json or csv (default json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-3420@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;user&quot;</span>: <span class="s2">&quot;sales_user&quot;</span>,
    <span class="s2">&quot;query_md5_id&quot;</span>: <span class="s2">&quot;617ec53d06c3f7138b3790c87ccb391e&quot;</span>,
    <span class="s2">&quot;query_id&quot;</span>: <span class="s2">&quot;1053048887&quot;</span>,
    <span class="s2">&quot;calls&quot;</span>: <span class="m">264256688</span>,
    <span class="s2">&quot;local_blks_dirtied&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_hit&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;rows&quot;</span>: <span class="m">93</span>,
    <span class="s2">&quot;shared_blks_dirtied&quot;</span>: <span class="m">159</span>,
    <span class="s2">&quot;shared_blks_hit&quot;</span>: <span class="m">528514486</span>,
    <span class="s2">&quot;shared_blks_read&quot;</span>: <span class="m">31</span>,
    <span class="s2">&quot;shared_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;total_time&quot;</span>: <span class="m">2504295</span>,
    <span class="s2">&quot;blk_read_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;blk_write_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;text&quot;</span>: <span class="s2">&quot;DELETE FROM sbtest2 WHERE id=</span><span class="nv">$1</span><span class="s2">&quot;</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-3420@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;user&quot;</span>: <span class="s2">&quot;sales_user&quot;</span>,
    <span class="s2">&quot;query_md5_id&quot;</span>: <span class="s2">&quot;8599d511ac1e7df8eec514b3ff1db635&quot;</span>,
    <span class="s2">&quot;query_id&quot;</span>: <span class="s2">&quot;3837882988&quot;</span>,
    <span class="s2">&quot;calls&quot;</span>: <span class="m">264218627</span>,
    <span class="s2">&quot;local_blks_dirtied&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_hit&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;rows&quot;</span>: <span class="m">120</span>,
    <span class="s2">&quot;shared_blks_dirtied&quot;</span>: <span class="m">259</span>,
    <span class="s2">&quot;shared_blks_hit&quot;</span>: <span class="m">528437796</span>,
    <span class="s2">&quot;shared_blks_read&quot;</span>: <span class="m">57</span>,
    <span class="s2">&quot;shared_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;total_time&quot;</span>: <span class="m">2535561</span>,
    <span class="s2">&quot;blk_read_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;blk_write_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;text&quot;</span>: <span class="s2">&quot;DELETE FROM sbtest1 WHERE id=</span><span class="nv">$1</span><span class="s2">&quot;</span>
  <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="queries-summary">
<h2><strong>Queries summary</strong><a class="headerlink" href="#queries-summary" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/queries-summary</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/queries-summary&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-021-20&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-02-21&quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>  <span class="o">{</span>
          <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
          <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-sales-1734@:9342&quot;</span>
        <span class="o">}</span>
    <span class="o">]</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“output”:  the output can be csv or json (default: json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>  <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-1734@:9342&quot;</span>,
      <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;postgres&quot;</span>,
      <span class="s2">&quot;calls&quot;</span>: <span class="m">317120</span>,
      <span class="s2">&quot;local_blks_dirtied&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;local_blks_hit&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;local_blks_read&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;local_blks_written&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;rows&quot;</span>: <span class="m">393531</span>,
      <span class="s2">&quot;shared_blks_dirtied&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;shared_blks_hit&quot;</span>: <span class="m">369970</span>,
      <span class="s2">&quot;shared_blks_read&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;shared_blks_written&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;temp_blks_read&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;temp_blks_written&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;total_time&quot;</span>: <span class="m">56147</span>,
      <span class="s2">&quot;blk_read_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;blk_write_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;perc_90&quot;</span>: <span class="m">3</span>,
      <span class="s2">&quot;perc_95&quot;</span>: <span class="m">11</span>,
      <span class="s2">&quot;perc_99&quot;</span>: <span class="m">12</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-1734@:9342&quot;</span>,
      <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
      <span class="s2">&quot;calls&quot;</span>: <span class="m">227101072</span>,
      <span class="s2">&quot;local_blks_dirtied&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;local_blks_hit&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;local_blks_read&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;local_blks_written&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;rows&quot;</span>: <span class="m">3576859082</span>,
      <span class="s2">&quot;shared_blks_dirtied&quot;</span>: <span class="m">3897894</span>,
      <span class="s2">&quot;shared_blks_hit&quot;</span>: <span class="m">5333055541</span>,
      <span class="s2">&quot;shared_blks_read&quot;</span>: <span class="m">25057</span>,
      <span class="s2">&quot;shared_blks_written&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;temp_blks_read&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;temp_blks_written&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;total_time&quot;</span>: <span class="m">33701425</span>,
      <span class="s2">&quot;blk_read_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;blk_write_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;perc_90&quot;</span>: <span class="m">1</span>,
      <span class="s2">&quot;perc_95&quot;</span>: <span class="m">1</span>,
      <span class="s2">&quot;perc_99&quot;</span>: <span class="m">1</span>
    <span class="o">}</span>
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="query-statistics">
<h2><strong>Query statistics</strong><a class="headerlink" href="#query-statistics" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/query</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/query&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;query_md5_id&quot;</span>: <span class="s2">&quot;&quot;</span>,
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-20&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-21&quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
      <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“query_md5_id”: The query id (md5 value) computed by Datasentinel</div>
<div class="line"><br /></div>
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“output”:  the output can be csv or json (default: json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-2429@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;user&quot;</span>: <span class="s2">&quot;sales_user&quot;</span>,
    <span class="s2">&quot;query_md5_id&quot;</span>: <span class="s2">&quot;617ec53d06c3f7138b3790c87ccb391e&quot;</span>,
    <span class="s2">&quot;query_id&quot;</span>: <span class="s2">&quot;1053048887&quot;</span>,
    <span class="s2">&quot;calls&quot;</span>: <span class="m">264256688</span>,
    <span class="s2">&quot;local_blks_dirtied&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_hit&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;rows&quot;</span>: <span class="m">93</span>,
    <span class="s2">&quot;shared_blks_dirtied&quot;</span>: <span class="m">159</span>,
    <span class="s2">&quot;shared_blks_hit&quot;</span>: <span class="m">528514486</span>,
    <span class="s2">&quot;shared_blks_read&quot;</span>: <span class="m">31</span>,
    <span class="s2">&quot;shared_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;total_time&quot;</span>: <span class="m">2504295</span>,
    <span class="s2">&quot;blk_read_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;blk_write_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;text&quot;</span>: <span class="s2">&quot;DELETE FROM sbtest2 WHERE id=</span><span class="nv">$1</span><span class="s2">&quot;</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-2429@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;user&quot;</span>: <span class="s2">&quot;sales_user&quot;</span>,
    <span class="s2">&quot;query_md5_id&quot;</span>: <span class="s2">&quot;8599d511ac1e7df8eec514b3ff1db635&quot;</span>,
    <span class="s2">&quot;query_id&quot;</span>: <span class="s2">&quot;3837882988&quot;</span>,
    <span class="s2">&quot;calls&quot;</span>: <span class="m">264218627</span>,
    <span class="s2">&quot;local_blks_dirtied&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_hit&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;local_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;rows&quot;</span>: <span class="m">120</span>,
    <span class="s2">&quot;shared_blks_dirtied&quot;</span>: <span class="m">259</span>,
    <span class="s2">&quot;shared_blks_hit&quot;</span>: <span class="m">528437796</span>,
    <span class="s2">&quot;shared_blks_read&quot;</span>: <span class="m">57</span>,
    <span class="s2">&quot;shared_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_blks_written&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;total_time&quot;</span>: <span class="m">2535561</span>,
    <span class="s2">&quot;blk_read_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;blk_write_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;text&quot;</span>: <span class="s2">&quot;DELETE FROM sbtest1 WHERE id=</span><span class="nv">$1</span><span class="s2">&quot;</span>
  <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="pg-instance-informations">
<h2><strong>PG instance informations</strong><a class="headerlink" href="#pg-instance-informations" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/pg-instance-infos</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/pg-instance-infos&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-021-20&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-02-21&quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[]</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“output”:  the output can be csv or json (default: json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>  <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-crm-0926@:9342&quot;</span>,
      <span class="s2">&quot;tags&quot;</span>: <span class="s2">&quot;{\&quot;application\&quot;: \&quot;crm\&quot;, \&quot;datacenter\&quot;: \&quot;lyon\&quot;, \&quot;environment\&quot;: \&quot;production\&quot;, \&quot;provider\&quot;: \&quot;azure\&quot;}&quot;</span>,
      <span class="s2">&quot;version&quot;</span>: <span class="s2">&quot;11.6&quot;</span>,
      <span class="s2">&quot;version_full&quot;</span>: <span class="s2">&quot;PostgreSQL 11.6 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-39), 64-bit&quot;</span>,
      <span class="s2">&quot;start_time&quot;</span>: <span class="s2">&quot;2020-02-17 17:28:41&quot;</span>,
      <span class="s2">&quot;uptime&quot;</span>: <span class="s2">&quot;3 days 07:31:07&quot;</span>,
      <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-crm-0926&quot;</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-crm-1523@:9342&quot;</span>,
      <span class="s2">&quot;tags&quot;</span>: <span class="s2">&quot;{\&quot;application\&quot;: \&quot;crm\&quot;, \&quot;datacenter\&quot;: \&quot;lyon\&quot;, \&quot;environment\&quot;: \&quot;production\&quot;, \&quot;provider\&quot;: \&quot;azure\&quot;}&quot;</span>,
      <span class="s2">&quot;version&quot;</span>: <span class="s2">&quot;11.6&quot;</span>,
      <span class="s2">&quot;version_full&quot;</span>: <span class="s2">&quot;PostgreSQL 11.6 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-39), 64-bit&quot;</span>,
      <span class="s2">&quot;start_time&quot;</span>: <span class="s2">&quot;2020-02-17 17:27:58&quot;</span>,
      <span class="s2">&quot;uptime&quot;</span>: <span class="s2">&quot;3 days 07:31:07&quot;</span>,
      <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-crm-1523&quot;</span>
    <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="pg-instance-activity">
<h2><strong>PG instance activity</strong><a class="headerlink" href="#pg-instance-activity" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/pg-instance</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/pg-instance&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-29 08:00:00 &quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
      <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">&quot;compute&quot;</span>: <span class="s2">&quot;details&quot;</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“compute” : optional field (default: details)</div>
<div class="line-block">
<div class="line">2 possible values :</div>
<div class="line-block">
<div class="line">. summary : Overall activity per PostgreSQL instance</div>
<div class="line">. details : Detailed activity per minute, per PostgreSQL instance</div>
<div class="line"><br /></div>
</div>
</div>
<div class="line">“output”:  the output can be csv or json (default: json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;all&quot;</span>,
    <span class="s2">&quot;blk_read_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;blk_write_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;blks_hit&quot;</span>: <span class="m">24695</span>,
    <span class="s2">&quot;blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;num_backends&quot;</span>: <span class="m">55</span>,
    <span class="s2">&quot;temp_bytes&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_files&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;tup_deleted&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;tup_fetched&quot;</span>: <span class="m">11455</span>,
    <span class="s2">&quot;tup_inserted&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;tup_returned&quot;</span>: <span class="m">27885</span>,
    <span class="s2">&quot;tup_updated&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;xact_commit&quot;</span>: <span class="m">1679</span>,
    <span class="s2">&quot;xact_rollback&quot;</span>: <span class="m">35</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:01:00&quot;</span>,
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;all&quot;</span>,
    <span class="s2">&quot;blk_read_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;blk_write_time&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;blks_hit&quot;</span>: <span class="m">24764</span>,
    <span class="s2">&quot;blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;num_backends&quot;</span>: <span class="m">55</span>,
    <span class="s2">&quot;temp_bytes&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;temp_files&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;tup_deleted&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;tup_fetched&quot;</span>: <span class="m">11466</span>,
    <span class="s2">&quot;tup_inserted&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;tup_returned&quot;</span>: <span class="m">29059</span>,
    <span class="s2">&quot;tup_updated&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;xact_commit&quot;</span>: <span class="m">1681</span>,
    <span class="s2">&quot;xact_rollback&quot;</span>: <span class="m">35</span>
  <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="pg-background-activity">
<h2><strong>PG background activity</strong><a class="headerlink" href="#pg-background-activity" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/pg-background</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/pg-background&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-29 08:00:00 &quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
      <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">&quot;compute&quot;</span>: <span class="s2">&quot;summary&quot;</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“compute” : optional field (default: details)</div>
<div class="line-block">
<div class="line">2 possible values :</div>
<div class="line-block">
<div class="line">. summary : Overall activity per PostgreSQL instance</div>
<div class="line">. details : Detailed activity per minute, per PostgreSQL instance</div>
<div class="line"><br /></div>
</div>
</div>
<div class="line">“output”:  the output can be csv or json (default: json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>  <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
      <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
      <span class="s2">&quot;buffers_alloc&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;buffers_backend&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;buffers_backend_fsync&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;buffers_checkpoint&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;buffers_clean&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;checkpoint_sync_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;checkpoint_write_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;checkpoints_req&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;checkpoints_timed&quot;</span>: <span class="m">1</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:01:00&quot;</span>,
      <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
      <span class="s2">&quot;buffers_alloc&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;buffers_backend&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;buffers_backend_fsync&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;buffers_checkpoint&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;buffers_clean&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;checkpoint_sync_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;checkpoint_write_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;checkpoints_req&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;checkpoints_timed&quot;</span>: <span class="m">4</span>
    <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="server-activity">
<h2><strong>Server activity</strong><a class="headerlink" href="#server-activity" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/server</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/server&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-29 08:00:00 &quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
      <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">&quot;compute&quot;</span>: <span class="s2">&quot;summary&quot;</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“compute” : optional field (default: details)</div>
<div class="line-block">
<div class="line">2 possible values :</div>
<div class="line-block">
<div class="line">. summary : Overall activity per PostgreSQL instance</div>
<div class="line">. details : Detailed activity per minute, per PostgreSQL instance</div>
<div class="line"><br /></div>
</div>
</div>
<div class="line">“output”:  the output can be csv or json (default: json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>  <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:36&quot;</span>,
      <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-sales-0223&quot;</span>,
      <span class="s2">&quot;cpu_model&quot;</span>: <span class="s2">&quot;AMD EPYC 7281 16-Core Processor&quot;</span>,
      <span class="s2">&quot;cores&quot;</span>: <span class="m">2</span>,
      <span class="s2">&quot;cpus&quot;</span>: <span class="m">2</span>,
      <span class="s2">&quot;os_idle&quot;</span>: <span class="m">0</span>.03,
      <span class="s2">&quot;os_iowait&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;os_nice&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;os_system&quot;</span>: <span class="m">14</span>,
      <span class="s2">&quot;os_user&quot;</span>: <span class="m">85</span>.5,
      <span class="s2">&quot;load_avg_1m&quot;</span>: <span class="m">2</span>.48,
      <span class="s2">&quot;mem_active&quot;</span>: <span class="m">1043222528</span>,
      <span class="s2">&quot;mem_available&quot;</span>: <span class="m">1237970944</span>,
      <span class="s2">&quot;mem_buffers&quot;</span>: <span class="m">136032256</span>,
      <span class="s2">&quot;mem_cached&quot;</span>: <span class="m">1352306688</span>,
      <span class="s2">&quot;mem_free&quot;</span>: <span class="m">107945984</span>,
      <span class="s2">&quot;mem_inactive&quot;</span>: <span class="m">642015232</span>,
      <span class="s2">&quot;mem_perc&quot;</span>: <span class="m">35</span>.7,
      <span class="s2">&quot;mem_shared&quot;</span>: <span class="m">134320128</span>,
      <span class="s2">&quot;mem_total&quot;</span>: <span class="m">1923837952</span>,
      <span class="s2">&quot;mem_used&quot;</span>: <span class="m">327553024</span>,
      <span class="s2">&quot;bytes_recv&quot;</span>: <span class="m">1059046</span>,
      <span class="s2">&quot;bytes_sent&quot;</span>: <span class="m">1106510</span>,
      <span class="s2">&quot;packets_recv&quot;</span>: <span class="m">3207</span>,
      <span class="s2">&quot;packets_sent&quot;</span>: <span class="m">3225</span>,
      <span class="s2">&quot;read_bytes&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;read_count&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;read_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;write_bytes&quot;</span>: <span class="m">856064</span>,
      <span class="s2">&quot;write_count&quot;</span>: <span class="m">90</span>,
      <span class="s2">&quot;write_time&quot;</span>: <span class="m">303</span>,
      <span class="s2">&quot;swap_free&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_in&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_out&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_perc&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_total&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_used&quot;</span>: <span class="m">0</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:01:36&quot;</span>,
      <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-sales-0223&quot;</span>,
      <span class="s2">&quot;cpu_model&quot;</span>: <span class="s2">&quot;AMD EPYC 7281 16-Core Processor&quot;</span>,
      <span class="s2">&quot;cores&quot;</span>: <span class="m">2</span>,
      <span class="s2">&quot;cpus&quot;</span>: <span class="m">2</span>,
      <span class="s2">&quot;os_idle&quot;</span>: <span class="m">17</span>.98,
      <span class="s2">&quot;os_iowait&quot;</span>: <span class="m">0</span>.01,
      <span class="s2">&quot;os_nice&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;os_system&quot;</span>: <span class="m">11</span>,
      <span class="s2">&quot;os_user&quot;</span>: <span class="m">70</span>.81,
      <span class="s2">&quot;load_avg_1m&quot;</span>: <span class="m">2</span>.11,
      <span class="s2">&quot;mem_active&quot;</span>: <span class="m">1043349504</span>,
      <span class="s2">&quot;mem_available&quot;</span>: <span class="m">1237643264</span>,
      <span class="s2">&quot;mem_buffers&quot;</span>: <span class="m">136040448</span>,
      <span class="s2">&quot;mem_cached&quot;</span>: <span class="m">1352425472</span>,
      <span class="s2">&quot;mem_free&quot;</span>: <span class="m">107491328</span>,
      <span class="s2">&quot;mem_inactive&quot;</span>: <span class="m">642011136</span>,
      <span class="s2">&quot;mem_perc&quot;</span>: <span class="m">35</span>.7,
      <span class="s2">&quot;mem_shared&quot;</span>: <span class="m">134320128</span>,
      <span class="s2">&quot;mem_total&quot;</span>: <span class="m">1923837952</span>,
      <span class="s2">&quot;mem_used&quot;</span>: <span class="m">327880704</span>,
      <span class="s2">&quot;bytes_recv&quot;</span>: <span class="m">1067069</span>,
      <span class="s2">&quot;bytes_sent&quot;</span>: <span class="m">1110658</span>,
      <span class="s2">&quot;packets_recv&quot;</span>: <span class="m">3216</span>,
      <span class="s2">&quot;packets_sent&quot;</span>: <span class="m">3242</span>,
      <span class="s2">&quot;read_bytes&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;read_count&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;read_time&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;write_bytes&quot;</span>: <span class="m">765952</span>,
      <span class="s2">&quot;write_count&quot;</span>: <span class="m">73</span>,
      <span class="s2">&quot;write_time&quot;</span>: <span class="m">145</span>,
      <span class="s2">&quot;swap_free&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_in&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_out&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_perc&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_total&quot;</span>: <span class="m">0</span>,
      <span class="s2">&quot;swap_used&quot;</span>: <span class="m">0</span>
    <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="data-size">
<h2><strong>Data size</strong><a class="headerlink" href="#data-size" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/data-size</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/data-size&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-29 08:00:00 &quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>,
      <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">&quot;compute&quot;</span>: <span class="s2">&quot;summary,</span>
<span class="s2">  &quot;</span>output<span class="s2">&quot;: &quot;</span>json<span class="s2">&quot;</span>
<span class="s2">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">“compute” : optional field (default: details)</div>
<div class="line-block">
<div class="line">2 possible values :</div>
<div class="line-block">
<div class="line">. summary : Overall activity per PostgreSQL instance</div>
<div class="line">. details : Detailed activity per hour, per PostgreSQL instance</div>
</div>
</div>
<div class="line">“output”:  the output can be csv or json (default: json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:04:49&quot;</span>,
    <span class="s2">&quot;application&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;pgbench&quot;</span>,
    <span class="s2">&quot;datacenter&quot;</span>: <span class="s2">&quot;paris&quot;</span>,
    <span class="s2">&quot;environment&quot;</span>: <span class="s2">&quot;production&quot;</span>,
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
    <span class="s2">&quot;pg_version&quot;</span>: <span class="s2">&quot;10.11&quot;</span>,
    <span class="s2">&quot;provider&quot;</span>: <span class="s2">&quot;amazon&quot;</span>,
    <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-sales-0223&quot;</span>,
    <span class="s2">&quot;data_size&quot;</span>: <span class="m">337042567</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:04:49&quot;</span>,
    <span class="s2">&quot;application&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;postgres&quot;</span>,
    <span class="s2">&quot;datacenter&quot;</span>: <span class="s2">&quot;paris&quot;</span>,
    <span class="s2">&quot;environment&quot;</span>: <span class="s2">&quot;production&quot;</span>,
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
    <span class="s2">&quot;pg_version&quot;</span>: <span class="s2">&quot;10.11&quot;</span>,
    <span class="s2">&quot;provider&quot;</span>: <span class="s2">&quot;amazon&quot;</span>,
    <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-sales-0223&quot;</span>,
    <span class="s2">&quot;data_size&quot;</span>: <span class="m">7773319</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;time&quot;</span>: <span class="s2">&quot;2020-01-29 06:04:49&quot;</span>,
    <span class="s2">&quot;application&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;sales&quot;</span>,
    <span class="s2">&quot;datacenter&quot;</span>: <span class="s2">&quot;paris&quot;</span>,
    <span class="s2">&quot;environment&quot;</span>: <span class="s2">&quot;production&quot;</span>,
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-sales-0223@:9342&quot;</span>,
    <span class="s2">&quot;pg_version&quot;</span>: <span class="s2">&quot;10.11&quot;</span>,
    <span class="s2">&quot;provider&quot;</span>: <span class="s2">&quot;amazon&quot;</span>,
    <span class="s2">&quot;server&quot;</span>: <span class="s2">&quot;pg-sales-0223&quot;</span>,
    <span class="s2">&quot;data_size&quot;</span>: <span class="m">296483975</span>
  <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="tables-activity">
<h2><strong>Tables activity</strong><a class="headerlink" href="#tables-activity" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/tables</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/tables&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-29 07:00:00&quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span> <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>, <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-crm-2429@:9342&quot;</span> <span class="o">}</span>
    <span class="o">]</span>,
  <span class="s2">&quot;limit&quot;</span>: <span class="m">40</span>,
  <span class="s2">&quot;by&quot;</span>: <span class="s2">&quot;idx_blks_hit&quot;</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">The 2 following parameters allow to define the sorting column as well as the number of rows returned</div>
<div class="line"><br /></div>
<div class="line">“by”: sorting column. (default heap_blks_hit)</div>
<div class="line">Can be one of thoses values:</div>
<div class="line">- heap_blks_hit, heap_blks_read, idx_blks_hit, idx_blks_read, idx_scan,</div>
<div class="line">- n_tup_del, n_tup_hot_upd, n_tup_ins, idx_tup_fetch,</div>
<div class="line">- n_tup_upd, relid, relkind, relpages, reltuples, seq_scan, seq_tup_read,</div>
<div class="line">- size, tidx_blks_hit, tidx_blks_read, toast_blks_hit, toast_blks_read,</div>
<div class="line">- vacuum_count, autovacuum_count, analyze_count, autoanalyze_count</div>
<div class="line"><br /></div>
<div class="line">“limit”: The number of rows returned (default 20)</div>
<div class="line"><br /></div>
<div class="line">“output”:  the output can be json or csv (default json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-crm-2429@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;crm&quot;</span>,
    <span class="s2">&quot;schema_name&quot;</span>: <span class="s2">&quot;public&quot;</span>,
    <span class="s2">&quot;rel_name&quot;</span>: <span class="s2">&quot;sbtest2&quot;</span>,
    <span class="s2">&quot;heap_blks_hit&quot;</span>: <span class="m">102</span>,
    <span class="s2">&quot;heap_blks_read&quot;</span>: <span class="m">3</span>,
    <span class="s2">&quot;idx_blks_hit&quot;</span>: <span class="m">550977207</span>,
    <span class="s2">&quot;idx_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;idx_scan&quot;</span>: <span class="m">275488514</span>,
    <span class="s2">&quot;idx_tup_fetch&quot;</span>: <span class="m">37</span>,
    <span class="s2">&quot;n_tup_del&quot;</span>: <span class="m">37</span>,
    <span class="s2">&quot;n_tup_hot_upd&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;n_tup_ins&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;n_tup_upd&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;relid&quot;</span>: <span class="m">16423</span>,
    <span class="s2">&quot;relkind&quot;</span>: <span class="s2">&quot;r&quot;</span>,
    <span class="s2">&quot;relpages&quot;</span>: <span class="m">2703</span>,
    <span class="s2">&quot;reltuples&quot;</span>: <span class="m">29703</span>,
    <span class="s2">&quot;seq_scan&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;seq_tup_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;size&quot;</span>: <span class="m">22142976</span>,
    <span class="s2">&quot;tidx_blks_hit&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;tidx_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;toast_blks_hit&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;toast_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;vacuum_count&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;autovacuum_count&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;analyze_count&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;autoanalyze_count&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;last_autoanalyze&quot;</span>: <span class="s2">&quot;2020-01-07 03:12:09&quot;</span>,
    <span class="s2">&quot;last_autovacuum&quot;</span>: <span class="s2">&quot;2020-02-01 18:58:10&quot;</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-crm-2429@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;crm&quot;</span>,
    <span class="s2">&quot;schema_name&quot;</span>: <span class="s2">&quot;public&quot;</span>,
    <span class="s2">&quot;rel_name&quot;</span>: <span class="s2">&quot;sbtest1&quot;</span>,
    <span class="s2">&quot;heap_blks_hit&quot;</span>: <span class="m">108</span>,
    <span class="s2">&quot;heap_blks_read&quot;</span>: <span class="m">6</span>,
    <span class="s2">&quot;idx_blks_hit&quot;</span>: <span class="m">550930476</span>,
    <span class="s2">&quot;idx_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;idx_scan&quot;</span>: <span class="m">275465166</span>,
    <span class="s2">&quot;idx_tup_fetch&quot;</span>: <span class="m">46</span>,
    <span class="s2">&quot;n_tup_del&quot;</span>: <span class="m">46</span>,
    <span class="s2">&quot;n_tup_hot_upd&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;n_tup_ins&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;n_tup_upd&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;relid&quot;</span>: <span class="m">16411</span>,
    <span class="s2">&quot;relkind&quot;</span>: <span class="s2">&quot;r&quot;</span>,
    <span class="s2">&quot;relpages&quot;</span>: <span class="m">2703</span>,
    <span class="s2">&quot;reltuples&quot;</span>: <span class="m">30260</span>,
    <span class="s2">&quot;seq_scan&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;seq_tup_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;size&quot;</span>: <span class="m">22142976</span>,
    <span class="s2">&quot;tidx_blks_hit&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;tidx_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;toast_blks_hit&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;toast_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;vacuum_count&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;autovacuum_count&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;analyze_count&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;autoanalyze_count&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;last_autoanalyze&quot;</span>: <span class="s2">&quot;2020-01-03 05:50:51&quot;</span>,
    <span class="s2">&quot;last_autovacuum&quot;</span>: <span class="s2">&quot;2020-01-27 17:17:09&quot;</span>
  <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="indexes-activity">
<h2><strong>Indexes activity</strong><a class="headerlink" href="#indexes-activity" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/indexes</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/indexes&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-29 07:00:00&quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span> <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>, <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-crm-2429@:9342&quot;</span> <span class="o">}</span>
    <span class="o">]</span>,
  <span class="s2">&quot;limit&quot;</span>: <span class="m">40</span>,
  <span class="s2">&quot;by&quot;</span>: <span class="s2">&quot;idx_blks_hit&quot;</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">The 2 following parameters allow to define the sorting column as well as the number of rows returned</div>
<div class="line"><br /></div>
<div class="line">“by”: sorting column. (default heap_blks_hit)</div>
<div class="line">Can be one of thoses values:</div>
<div class="line">- idx_blks_hit, idx_blks_read, idx_scan,</div>
<div class="line">- idx_tup_fetch, idx_tup_read</div>
<div class="line">- relpages, size</div>
<div class="line"><br /></div>
<div class="line">“limit”: The number of rows returned (default 20)</div>
<div class="line"><br /></div>
<div class="line">“output”:  the output can be json or csv (default json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-crm-2429@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;crm&quot;</span>,
    <span class="s2">&quot;schema_name&quot;</span>: <span class="s2">&quot;public&quot;</span>,
    <span class="s2">&quot;rel_name&quot;</span>: <span class="s2">&quot;sbtest2&quot;</span>,
    <span class="s2">&quot;index_rel_name&quot;</span>: <span class="s2">&quot;sbtest2_pkey&quot;</span>,
    <span class="s2">&quot;idx_blks_hit&quot;</span>: <span class="m">550977159</span>,
    <span class="s2">&quot;idx_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;idx_scan&quot;</span>: <span class="m">275488514</span>,
    <span class="s2">&quot;idx_tup_fetch&quot;</span>: <span class="m">37</span>,
    <span class="s2">&quot;idx_tup_read&quot;</span>: <span class="m">38</span>,
    <span class="s2">&quot;relpages&quot;</span>: <span class="m">278</span>,
    <span class="s2">&quot;size&quot;</span>: <span class="m">2277376</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;pg_instance&quot;</span>: <span class="s2">&quot;pg-crm-2429@:9342&quot;</span>,
    <span class="s2">&quot;database&quot;</span>: <span class="s2">&quot;crm&quot;</span>,
    <span class="s2">&quot;schema_name&quot;</span>: <span class="s2">&quot;public&quot;</span>,
    <span class="s2">&quot;rel_name&quot;</span>: <span class="s2">&quot;sbtest1&quot;</span>,
    <span class="s2">&quot;index_rel_name&quot;</span>: <span class="s2">&quot;sbtest1_pkey&quot;</span>,
    <span class="s2">&quot;idx_blks_hit&quot;</span>: <span class="m">550930428</span>,
    <span class="s2">&quot;idx_blks_read&quot;</span>: <span class="m">0</span>,
    <span class="s2">&quot;idx_scan&quot;</span>: <span class="m">275465166</span>,
    <span class="s2">&quot;idx_tup_fetch&quot;</span>: <span class="m">46</span>,
    <span class="s2">&quot;idx_tup_read&quot;</span>: <span class="m">52</span>,
    <span class="s2">&quot;relpages&quot;</span>: <span class="m">278</span>,
    <span class="s2">&quot;size&quot;</span>: <span class="m">2277376</span>
  <span class="o">}</span>,
  .../...
  <span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="top-consumers">
<h2><strong>Top consumers</strong><a class="headerlink" href="#top-consumers" title="Permalink to this headline">¶</a></h2>
<h6 ><span style="margin-left:30px;font-weight:bold;color: #45d6b5">POST</span><span style="color:#45d6b5">&nbsp;/ds-api/activity/top-consumers</span></h6><ul class="simple">
<li><p>Example</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TOKEN</span><span class="o">=</span><span class="s">&lt;&lt;user_token&gt;&gt;</span>
<span class="s">curl -k --header &quot;user</span>-token: <span class="nv">$TOKEN</span><span class="s2">&quot; --header &#39;Content-Type: application/json&#39; --request POST &#39;https://app.datasentinel.io/ds-api/activity/top-consumers&#39; -d @body.json</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Request example (body.json)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span>
  <span class="s2">&quot;utc_time&quot;</span>: true,
  <span class="s2">&quot;from&quot;</span>: <span class="s2">&quot;2020-01-29 06:00:00&quot;</span>,
  <span class="s2">&quot;to&quot;</span>: <span class="s2">&quot;2020-01-29 07:00:00&quot;</span>,
  <span class="s2">&quot;filters&quot;</span>: <span class="o">[</span>
    <span class="o">{</span> <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;pg_instance&quot;</span>, <span class="s2">&quot;value&quot;</span>: <span class="s2">&quot;pg-crm-2429@:9342&quot;</span> <span class="o">}</span>
    <span class="o">]</span>,
  <span class="s2">&quot;limit&quot;</span>: <span class="m">10</span>,
  <span class="s2">&quot;group_by&quot;</span>: <span class="s2">&quot;datacenter&quot;</span>,
  <span class="s2">&quot;by&quot;</span>: <span class="s2">&quot;db_time&quot;</span>,
  <span class="s2">&quot;output&quot;</span>: <span class="s2">&quot;json&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<ul>
<li><p>Parameters:</p>
<blockquote>
<div><div class="line-block">
<div class="line">“utc_time” [Optional] Default: true</div>
<div class="line-block">
<div class="line">When false , the timezone taken into account will depend on the timezone of the platform</div>
<div class="line"><br /></div>
</div>
<div class="line">“from”: The start date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line">“end”:  The end date. The format can be YYYY-MM-DD, YYYY-MM-DD HH:MI, YYYY-MM-DD HH:MI:SS</div>
<div class="line"><br /></div>
<div class="line">“filters” is an optional array of tags (“tag” : Tag name, “value”: Tag value)</div>
<div class="line"><br /></div>
<div class="line">The 3 following parameters allow to define the group, the sorting column as well as the number of rows returned</div>
<div class="line"><br /></div>
<div class="line">“group_by”: tag group. (default pg_instance)</div>
<div class="line-block">
<div class="line">Can be one of defined tags.</div>
<div class="line"><br /></div>
</div>
<div class="line">“by”: sorting column. (default db_time)</div>
<div class="line">Can be one of thoses values:</div>
<div class="line">- db_time : Total time (ms) spent executing sqls,</div>
<div class="line">- memory : Total of memory (bytes) allocated (shared_buffers),</div>
<div class="line">- data_size : Total data size (bytes),</div>
<div class="line">- wal_size : Total size of WAL generated (bytes),</div>
<div class="line">- cache_blocks_hit : Total number of blocks hit from cache</div>
<div class="line">- disk_blocks_read : Total number of blocks read outside the PostgreSQL cache</div>
<div class="line"><br /></div>
<div class="line">“limit”: The number of rows returned (default 20)</div>
<div class="line"><br /></div>
<div class="line">“output”:  the output can be json or csv (default json)</div>
</div>
</div></blockquote>
</li>
<li><p>Response</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;paris&quot;</span>,
    <span class="s2">&quot;instances&quot;</span>: <span class="m">3</span>,
    <span class="s2">&quot;db_time&quot;</span>: <span class="m">239673553</span>,
    <span class="s2">&quot;wal_size&quot;</span>: <span class="m">52053547328</span>,
    <span class="s2">&quot;memory_size&quot;</span>: <span class="m">49152</span>,
    <span class="s2">&quot;data_size&quot;</span>: <span class="m">942975786</span>,
    <span class="s2">&quot;cache_blocks_hit&quot;</span>: <span class="m">39601119635</span>,
    <span class="s2">&quot;disk_blocks_read&quot;</span>: <span class="m">3897687</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">&quot;tag&quot;</span>: <span class="s2">&quot;lille&quot;</span>,
    <span class="s2">&quot;instances&quot;</span>: <span class="m">3</span>,
    <span class="s2">&quot;db_time&quot;</span>: <span class="m">193989446</span>,
    <span class="s2">&quot;wal_size&quot;</span>: <span class="m">85274148792</span>,
    <span class="s2">&quot;memory_size&quot;</span>: <span class="m">49152</span>,
    <span class="s2">&quot;data_size&quot;</span>: <span class="m">931415688</span>,
    <span class="s2">&quot;cache_blocks_hit&quot;</span>: <span class="m">16088607267</span>,
    <span class="s2">&quot;disk_blocks_read&quot;</span>: <span class="m">5931946</span>
  <span class="o">}</span>,
  .../...
<span class="o">]</span>
</pre></div>
</div>
</div>
</div>


        </div>
        <div class="side-doc-outline">
            <div class="side-doc-outline--content"> 
<div class="localtoc">
    <p class="caption">
      <span class="caption-text">Table Of Contents</span>
    </p>
    <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#endpoints"><strong>Endpoints</strong></a></li>
<li><a class="reference internal" href="#user-token-generation"><strong>User token generation</strong></a></li>
<li><a class="reference internal" href="#display-user-token"><strong>Display User token</strong></a></li>
<li><a class="reference internal" href="#workload-report"><strong>Workload report</strong></a></li>
<li><a class="reference internal" href="#sessions-workload"><strong>Sessions workload</strong></a></li>
<li><a class="reference internal" href="#top-queries"><strong>Top queries</strong></a></li>
<li><a class="reference internal" href="#queries-summary"><strong>Queries summary</strong></a></li>
<li><a class="reference internal" href="#query-statistics"><strong>Query statistics</strong></a></li>
<li><a class="reference internal" href="#pg-instance-informations"><strong>PG instance informations</strong></a></li>
<li><a class="reference internal" href="#pg-instance-activity"><strong>PG instance activity</strong></a></li>
<li><a class="reference internal" href="#pg-background-activity"><strong>PG background activity</strong></a></li>
<li><a class="reference internal" href="#server-activity"><strong>Server activity</strong></a></li>
<li><a class="reference internal" href="#data-size"><strong>Data size</strong></a></li>
<li><a class="reference internal" href="#tables-activity"><strong>Tables activity</strong></a></li>
<li><a class="reference internal" href="#indexes-activity"><strong>Indexes activity</strong></a></li>
<li><a class="reference internal" href="#top-consumers"><strong>Top consumers</strong></a></li>
</ul>
</li>
</ul>

</div>
            </div>
        </div>

      <div class="clearer"></div>
    </div><div class="pagenation">
     <a id="button-prev" href="user-management.html" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--colored" role="botton" accesskey="P">
         <i class="pagenation-arrow-L material-icons">arrow_back</i>
         <div class="pagenation-text">
            <span class="pagenation-direction">Previous</span>
            <div>User management</div>
         </div>
     </a>
     <a id="button-next" href="agentless.html" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--colored" role="botton" accesskey="N">
        <i class="pagenation-arrow-R material-icons">arrow_forward</i>
        <div class="pagenation-text">
            <span class="pagenation-direction">Next</span>
            <div>Agentless</div>
        </div>
     </a>
  </div>
        <footer class="mdl-mini-footer">
    <div class="mdl-mini-footer__left-section">
      <div class="mdl-logo">Datasentinel</div>
      <div>
        
        
      </div>
    </div>

    <div class="mdl-mini-footer__right-section">
        <div>&copy; Copyright 2019-2020, Datasentinel.</div>
      <div>Generated by <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.1.1 using <a href="https://github.com/myyasuda/sphinx_materialdesign_theme">sphinx_materialdesign_theme</a>.</div>
    </div>
</footer>
        </main>
    </div>
  </body>
</html>